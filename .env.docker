# =============================================================================
# Docker Environment Configuration
# =============================================================================
# This file contains Docker-specific environment variable defaults
# These values are optimized for containerized deployment

# =============================================================================
# Application Configuration
# =============================================================================
APP_ENV=production
LOG_LEVEL=INFO
DEBUG=false
RELOAD=false

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# =============================================================================
# Database Configuration (Docker Services)
# =============================================================================
DB_HOST=postgres
DB_PORT=5432
DB_NAME=rental_ml
DB_USERNAME=postgres
DB_PASSWORD=docker_postgres_password

# Database Connection Pool Settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# =============================================================================
# Redis Configuration (Docker Services)
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=docker_redis_password
REDIS_MAX_CONNECTIONS=20
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_HEALTH_CHECK_INTERVAL=30

# =============================================================================
# Celery Configuration (Background Tasks)
# =============================================================================
CELERY_BROKER_URL=redis://:docker_redis_password@redis:6379/1
CELERY_RESULT_BACKEND=redis://:docker_redis_password@redis:6379/2
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true

# =============================================================================
# Security Configuration
# =============================================================================
SECRET_KEY=docker_secret_key_change_in_production
JWT_SECRET_KEY=docker_jwt_secret_change_in_production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_DELTA=3600

# =============================================================================
# Machine Learning Configuration
# =============================================================================
ML_MODEL_PATH=/app/models
ML_BATCH_SIZE=32
ML_CACHE_TTL=3600
ML_EMBEDDING_DIMENSION=128
ML_LEARNING_RATE=0.001
ML_TRAINING_ENABLED=false
ML_PREDICTION_TIMEOUT=30
ML_MAX_CONCURRENT_PREDICTIONS=10

# =============================================================================
# Web Scraping Configuration
# =============================================================================
ENABLE_SCRAPING=true
SCRAPING_USER_AGENT=RentalMLBot/1.0
SCRAPING_DELAY=1.0
SCRAPING_MAX_RETRIES=3
SCRAPING_TIMEOUT=30
SCRAPING_MAX_CONCURRENT=5

# =============================================================================
# External Services Configuration
# =============================================================================
# Note: Configure these in your actual deployment
SENTRY_DSN=
SENTRY_ENVIRONMENT=docker
SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# Monitoring and Observability
# =============================================================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_ENABLED=true
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_INTERVAL=30

# Logging Configuration
LOG_FORMAT=json
LOG_FILE=/app/logs/app.log
LOG_MAX_SIZE=10MB
LOG_BACKUP_COUNT=5

# =============================================================================
# Feature Flags
# =============================================================================
ENABLE_RECOMMENDATIONS=true
ENABLE_SEARCH_RANKING=true
ENABLE_USER_TRACKING=true
ENABLE_ANALYTICS=true
ENABLE_CACHING=true
ENABLE_RATE_LIMITING=true
ENABLE_API_DOCS=true

# =============================================================================
# Docker Network Configuration
# =============================================================================
# These are internal Docker network hostnames
NGINX_UPSTREAM=app:8000
PROMETHEUS_TARGET=app:8000

# =============================================================================
# Volume Paths (Docker Internal)
# =============================================================================
DATA_PATH=/app/data
LOGS_PATH=/app/logs
MODELS_PATH=/app/models

# =============================================================================
# Performance Tuning for Containers
# =============================================================================
# API Rate Limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=100

# Caching
CACHE_DEFAULT_TIMEOUT=3600
CACHE_MAX_ENTRIES=10000

# Database
DB_QUERY_TIMEOUT=30
DB_SLOW_QUERY_THRESHOLD=1.0

# =============================================================================
# Container Resource Limits
# =============================================================================
# These can be overridden by Docker Compose or Kubernetes
MAX_MEMORY=1G
MAX_CPU=1.0
WORKER_PROCESSES=4
WORKER_CONNECTIONS=1000

# =============================================================================
# Development Override (for docker-compose.dev.yml)
# =============================================================================
# These values are used when developing with Docker
DEV_DB_HOST=postgres-dev
DEV_DB_PORT=5432
DEV_DB_NAME=rental_ml_dev
DEV_DB_PASSWORD=dev_password

DEV_REDIS_HOST=redis-dev
DEV_REDIS_PASSWORD=dev_redis_password

DEV_LOG_LEVEL=DEBUG
DEV_DEBUG=true
DEV_RELOAD=true

# Development Services
JUPYTER_TOKEN=
FLOWER_USER=admin
FLOWER_PASSWORD=flower_dev_password
REDIS_COMMANDER_USER=admin
REDIS_COMMANDER_PASSWORD=admin
PGADMIN_EMAIL=admin@rental-ml.local
PGADMIN_PASSWORD=pgadmin_dev_password